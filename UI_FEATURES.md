# LLMReader UI 新功能说明

## 🎯 主要改进

### 1. 📋 自动总结展示
- **功能**: 在UI中直接查看自动生成的总结内容
- **位置**: 处理完文档后，在聊天区域上方显示
- **内容**: 
  - 📝 简要总结 (brief_summary.md)
  - 📖 详细总结 (detail_summary.md)
- **格式**: 使用标签页形式展示，支持Markdown渲染

### 2. 📁 智能数据管理
- **功能**: 在侧边栏提供完整的数据管理界面
- **特性**:
  - 显示所有已处理文档的列表
  - 详细展示每个文档的数据文件状态
  - 显示文件大小和总结文件信息
  - 支持文件级别的精确删除

### 3. 🗑️ 文件级别删除控制
- **精确删除**: 可选择删除具体的文件，而不是整个文件夹
- **文件分类显示**:
  - 📄 JSON数据文件
  - 🔍 向量数据库文件
  - 📋 输出文件 (总结文档)
  - 🖼️ PDF图片文件
- **多选删除**: 支持同时选择多个文件进行删除
- **快速操作**:
  - 🗑️ 删除所有文件
  - 📋 仅保留总结
  - 🔍 仅保留向量库

### 4. 📊 文件大小显示
- **功能**: 自动计算并显示各种数据文件的大小
- **格式**: 智能转换 (B, KB, MB, GB)
- **位置**: 在数据管理界面中显示每个文件的具体大小

## 🚀 使用方法

### 启动UI
```bash
cd LLMReader
streamlit run src/ui/app.py
```

### 查看总结
1. 上传并处理PDF或网页
2. 确保勾选"生成并保存摘要到本地"
3. 处理完成后，在聊天区域上方查看总结标签页

### 管理数据
1. 在侧边栏的"数据管理"部分
2. 选择要管理的文档
3. 查看文档的详细信息和文件列表
4. 选择要删除的具体文件
5. 确认删除操作

### 文件级别删除
1. 在数据管理界面选择文档
2. 查看按类型分组的文件列表
3. 使用多选框选择要删除的具体文件
4. 查看选中的文件列表和大小
5. 确认删除操作

## 📁 数据文件说明

### JSON数据文件
- **位置**: `data/json_data/{文档名}.json`
- **内容**: 原始提取的文档内容
- **用途**: 用于重新处理和分析
- **删除影响**: 删除后需要重新提取文档内容

### 向量数据库文件
- **位置**: `data/vector_db/{文档名}_data_index/`
- **内容**: 文档的向量化表示文件
- **用途**: 支持智能问答功能
- **删除影响**: 删除后需要重新构建向量数据库

### 输出文件
- **位置**: `data/output/{文档名}/`
- **内容**: 
  - `brief_summary.md` - 简要总结
  - `brief_summary.pdf` - 简要总结PDF
  - `detail_summary.md` - 详细总结
  - `detail_summary.pdf` - 详细总结PDF
- **删除影响**: 删除后无法在UI中查看总结

### PDF图片文件
- **位置**: `data/pdf_image/{文档名}/`
- **内容**: PDF转换的图片文件
- **用途**: 用于OCR和内容提取
- **删除影响**: 删除后需要重新转换PDF

## ⚠️ 注意事项

1. **删除操作不可恢复**: 删除文件前请确认
2. **总结文件依赖**: 查看总结需要确保处理时勾选了保存选项
3. **文件大小**: 大文档的向量数据库可能包含多个文件
4. **当前文档**: 删除当前正在使用的文档关键文件会重置聊天状态
5. **文件选择**: 可以精确选择要删除的文件，避免误删

## 🎨 UI改进

- 添加了emoji图标，提升视觉体验
- 改进了布局，使用列布局优化空间利用
- 添加了加载动画和状态提示
- 优化了按钮和交互设计
- 提供了更清晰的功能分组
- 文件按类型分组显示，便于管理

## 🔧 技术实现

- 使用Streamlit的multiselect实现文件多选删除
- 通过文件系统API获取文件大小和状态
- 使用标签页展示不同类型的总结
- 实现了智能的文件大小格式化
- 添加了完整的错误处理和用户反馈
- 文件级别的精确删除控制
- 按类型分组的文件显示
